"Rule_Location","Pattern_or_Condition","Matches_or_Triggers","Outcome_or_Action","Notes"
"UNIT_PATTERNS","\\bmg(?:/m2|/m²)?\\b","mg, mg/m2, mg/m²","Considered a unit; will be captured as tag",""
"UNIT_PATTERNS","\\bµg\\b","µg","Tag",""
"UNIT_PATTERNS","\\bmcg\\b","mcg","Tag",""
"UNIT_PATTERNS","\\bIU\\b","IU","Tag",""
"UNIT_PATTERNS","\\bU/mL\\b","U/mL","Tag",""
"UNIT_PATTERNS","\\bAUC\\d+\\b","AUC + digits (e.g. AUC0)","Tag",""
"UNIT_PATTERNS","\\bGy\\b","Gy","Tag",""
"UNIT_PATTERNS","\\b%\\b","%","Tag",""
"UNIT_PATTERNS","\\bmmHg\\b","mmHg","Tag",""
"UNIT_PATTERNS","\\bq\\d+[wd]\\b","q1w, q2d, etc.","Tag",""
"UNIT_PATTERNS","\\bqd\\b","qd","Tag",""
"UNIT_PATTERNS","\\bbid\\b","bid","Tag",""
"UNIT_PATTERNS","\\btid\\b","tid","Tag",""
"UNIT_PATTERNS","\\bd\\d+(?:[,-]\\d+)*\\b","d1, d1-3, d1,4","Tag",""
"UNIT_PATTERNS","\\bx\\d+\\s*cycles?\\b","x3 cycles, x2 cycle","Tag",""
"UNIT_PATTERNS","\\bIV\\b","IV","Tag",""
"UNIT_PATTERNS","\\bPO\\b","PO","Tag",""
"UNIT_PATTERNS","\\bSC\\b","SC","Tag",""
"UNIT_PATTERNS","\\bICD-10\\b","ICD-10","Tag",""
"UNIT_REGEX","re.compile(join(UNIT_PATTERNS), re.I)","Any of UNIT_PATTERNS","Used in strip_units_and_tags to find tags","Regex is case-insensitive"
"strip_units_and_tags","UNIT_REGEX.sub(_tagger, text) then re.sub(r\"\\s+\", \" \", ...).strip()","Matches replaced with single space; matched substrings added to tags set; whitespace collapsed","Returns (clean_text, tags)","Tags are the exact matched substrings (case preserved as matched)"
"AGE_HINTS","\\bage\\b|\\bage[_\\s-]?at\\b|\\bdiagnosis[_\\s-]?age\\b (re.I)","age, age_at, diagnosis_age","Used in detect_numeric_semantic -> category 'age'","Case-insensitive"
"TIME_HINTS","\\b(date|day|days|month|months|year|years|start|end|duration|freq(uency)?|interval)\\b (re.I)","date, day(s), month(s), year(s), start, end, duration, freq, frequency, interval","Used in detect_numeric_semantic -> category 'time'","Case-insensitive"
"DOSE_HINTS","\\b(dose|auc|gy|mg|m2|m²|regimen|cycle)\\b (re.I)","dose, auc, gy, mg, m2, m², regimen, cycle","Used in detect_numeric_semantic -> category 'dose'","Case-insensitive"
"detect_numeric_semantic - condition 1","any(tag matches r\"(AUC\\d+|Gy|mg\\b|mg/m2|mg/m²)\") OR DOSE_HINTS.search(header)","Tags like AUC0, Gy, mg or header matches dose hints","Returns 'dose'","This condition is checked first"
"detect_numeric_semantic - condition 2","AGE_HINTS.search(header)","Header contains age hints","Returns 'age'","Checked after dose condition"
"detect_numeric_semantic - condition 3","TIME_HINTS.search(header)","Header contains time hints","Returns 'time'","Checked after dose and age"
"detect_numeric_semantic - default","none of the above","No matches in tags or header","Returns 'unknown'",""
"family_boost (dose) - rule 1","fname contains 'treatment_dose' OR 'dose'","Field name contains treatment_dose or dose","Returns 0.15","fname is lowercased before checks"
"family_boost (dose) - rule 2","fname contains 'treatment_number' OR 'cycle' OR 'auc' OR 'unit'","Field name contains any of the above","Returns 0.10",""
"family_boost (age) - rule 1","fname contains 'age'","Field name contains 'age'","Returns 0.15",""
"family_boost (age) - rule 2","fname contains 'age_group'","Field name contains 'age_group'","Returns 0.10",""
"family_boost (time) - rule 1","fname contains any of ['date','start','end','duration','frequency','time']","Field name contains any of these tokens","Returns 0.15",""
"family_boost (time) - rule 2","fname contains 'unit' AND any of ['duration','frequency','start','end']","Field name contains 'unit' and one of those tokens","Returns 0.10",""
"family_boost - default","none of the above","No matching substrings in fname","Returns 0.0","Checks are sequential and not cumulative; fname is lowercased"